#!/bin/bash
# XMonad startup xinitrc
# This will use the xmonad-start script that includes system tray components

# Use the xmonad-start script if it exists, otherwise fallback to basic xmonad
if [ -x "$HOME/.xmonad/xmonad-start" ]; then
    exec "$HOME/.xmonad/xmonad-start"
else
    # Fallback: basic XMonad startup
    # Set Caps Lock as Ctrl
    setxkbmap -option ctrl:nocaps

    # Start system tray components manually
    stalonetray &
    nm-applet --indicator &
    sleep 2
    pasystray &
    blueman-applet &

    # Start compositor
    if command -v picom > /dev/null 2>&1; then
        picom -b --config ~/.config/picom/picom.conf 2>/dev/null || picom -b &
    fi

    exec xmonad
fi
